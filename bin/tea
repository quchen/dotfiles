#!/usr/bin/env bash
set -e

TIMER=${1:-120}
INTERVAL=30

function _tea () {
    echo "Ringing in $TIMER seconds"
    sleep $(( $TIMER % $INTERVAL ))
    for I in $( seq 1 $(( $TIMER / $INTERVAL )) | tac ); do
        local remaining=$(( $I * $INTERVAL ));
        notify-send "Tea: $remaining seconds remaining"
        sleep "$INTERVAL"
    done
    notify-send "Tea is ready!"
    zenity --info --text="Tea is ready!"
}

_tea & disown