#!/usr/bin/env bash

set -euo pipefail

CLIPBOARD="xsel --clipboard -i"

if [[ "$#" -eq 1 && ("$1" == "--help" || "$1" == "-h") ]]; then
    echo "Copy text to the clipboard."
    echo ""
    echo "Usage:"
    echo "    a) Pipe STDOUT to this script"
    echo "    b) Provide text as argument"
    exit 0
fi

if [[ "$#" -ne 0 ]]; then
    echo "$*" | $CLIPBOARD
else
    cat - | $CLIPBOARD
fi

echo -e "\e[1m$(xsel -o --clipboard | wc --bytes | numfmt --to=iec-i --suffix=B)\e[m copied to clipboard"
